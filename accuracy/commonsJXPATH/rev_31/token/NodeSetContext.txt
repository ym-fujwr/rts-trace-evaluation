package
org
.
apache
.
commons
.
jxpath
.
ri
.
axes
;
import
org
.
apache
.
commons
.
jxpath
.
NodeSet
;
import
org
.
apache
.
commons
.
jxpath
.
ri
.
EvalContext
;
import
org
.
apache
.
commons
.
jxpath
.
ri
.
model
.
NodePointer
;
public
class
NodeSetContext
extends
EvalContext
{
private
boolean
startedSet
=
false
;
private
final
NodeSet
nodeSet
;
public
NodeSetContext
(
final
EvalContext
parentContext
,
final
NodeSet
nodeSet
)
{
super
(
parentContext
)
;
this
.
nodeSet
=
nodeSet
;
}
@
Override
public
NodeSet
getNodeSet
(
)
{
return
nodeSet
;
}
@
Override
public
NodePointer
getCurrentNodePointer
(
)
{
if
(
position
==
0
&&
!
setPosition
(
1
)
)
{
return
null
;
}
return
(
NodePointer
)
nodeSet
.
getPointers
(
)
.
get
(
position
-
1
)
;
}
@
Override
public
boolean
setPosition
(
final
int
position
)
{
super
.
setPosition
(
position
)
;
return
position
>=
1
&&
position
<=
nodeSet
.
getPointers
(
)
.
size
(
)
;
}
@
Override
public
boolean
nextSet
(
)
{
if
(
startedSet
)
{
return
false
;
}
startedSet
=
true
;
return
true
;
}
@
Override
public
boolean
nextNode
(
)
{
return
setPosition
(
position
+
1
)
;
}
}
<EOF>
