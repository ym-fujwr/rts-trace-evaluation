package
org
.
apache
.
commons
.
jxpath
.
ri
.
model
.
beans
;
import
org
.
apache
.
commons
.
jxpath
.
ri
.
QName
;
import
org
.
apache
.
commons
.
jxpath
.
ri
.
model
.
NodePointer
;
public
class
BeanAttributeIterator
extends
PropertyIterator
{
private
final
NodePointer
parent
;
private
int
position
=
0
;
private
final
boolean
includeXmlLang
;
public
BeanAttributeIterator
(
final
PropertyOwnerPointer
parent
,
final
QName
name
)
{
super
(
parent
,
name
.
getPrefix
(
)
==
null
&&
(
name
.
getName
(
)
==
null
||
name
.
getName
(
)
.
equals
(
"*"
)
)
?
null
:
name
.
toString
(
)
,
false
,
null
)
;
this
.
parent
=
parent
;
includeXmlLang
=
name
.
getPrefix
(
)
!=
null
&&
name
.
getPrefix
(
)
.
equals
(
"xml"
)
&&
(
name
.
getName
(
)
.
equals
(
"lang"
)
||
name
.
getName
(
)
.
equals
(
"*"
)
)
;
}
@
Override
public
NodePointer
getNodePointer
(
)
{
return
includeXmlLang
&&
position
==
1
?
new
LangAttributePointer
(
parent
)
:
super
.
getNodePointer
(
)
;
}
@
Override
public
int
getPosition
(
)
{
return
position
;
}
@
Override
public
boolean
setPosition
(
final
int
position
)
{
this
.
position
=
position
;
if
(
includeXmlLang
)
{
return
position
==
1
||
super
.
setPosition
(
position
-
1
)
;
}
return
super
.
setPosition
(
position
)
;
}
}
<EOF>
