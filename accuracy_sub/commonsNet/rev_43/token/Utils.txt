package
org
.
apache
.
commons
.
net
.
examples
.
mail
;
import
java
.
io
.
BufferedReader
;
import
java
.
io
.
Console
;
import
java
.
io
.
IOException
;
import
java
.
io
.
InputStreamReader
;
import
java
.
util
.
Locale
;
class
Utils
{
static
String
getPassword
(
final
String
username
,
String
password
)
throws
IOException
{
if
(
"-"
.
equals
(
password
)
)
{
final
BufferedReader
in
=
new
BufferedReader
(
new
InputStreamReader
(
System
.
in
)
)
;
password
=
in
.
readLine
(
)
;
}
else
if
(
"*"
.
equals
(
password
)
)
{
final
Console
con
=
System
.
console
(
)
;
if
(
con
==
null
)
{
throw
new
IOException
(
"Cannot access Console"
)
;
}
final
char
[
]
pwd
=
con
.
readPassword
(
"Password for "
+
username
+
": "
)
;
password
=
new
String
(
pwd
)
;
}
else
if
(
password
.
equals
(
password
.
toUpperCase
(
Locale
.
ROOT
)
)
)
{
final
String
tmp
=
System
.
getenv
(
password
)
;
if
(
tmp
!=
null
)
{
password
=
tmp
;
}
}
return
password
;
}
private
Utils
(
)
{
}
}
<EOF>
