package
org
.
apache
.
commons
.
jxpath
.
ri
.
model
.
beans
;
import
java
.
util
.
HashMap
;
import
java
.
util
.
Map
;
import
junit
.
framework
.
TestCase
;
import
org
.
apache
.
commons
.
jxpath
.
AbstractFactory
;
import
org
.
apache
.
commons
.
jxpath
.
JXPathAbstractFactoryException
;
import
org
.
apache
.
commons
.
jxpath
.
JXPathContext
;
import
org
.
apache
.
commons
.
jxpath
.
JXPathException
;
import
org
.
apache
.
commons
.
jxpath
.
Pointer
;
public
class
BadlyImplementedFactoryTest
extends
TestCase
{
private
JXPathContext
context
;
public
void
setUp
(
)
{
context
=
JXPathContext
.
newContext
(
new
HashMap
(
)
)
;
context
.
setFactory
(
new
AbstractFactory
(
)
{
public
boolean
createObject
(
JXPathContext
context
,
Pointer
pointer
,
Object
parent
,
String
name
,
int
index
)
{
(
(
Map
)
parent
)
.
put
(
name
,
null
)
;
return
true
;
}
}
)
;
}
public
void
testBadFactoryImplementation
(
)
{
try
{
context
.
createPath
(
"foo/bar"
)
;
fail
(
"should fail with JXPathException caused by JXPathAbstractFactoryException"
)
;
}
catch
(
JXPathException
e
)
{
assertTrue
(
e
.
getCause
(
)
instanceof
JXPathAbstractFactoryException
)
;
}
}
}
<EOF>
