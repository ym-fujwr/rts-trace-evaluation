package
org
.
apache
.
commons
.
jxpath
.
ri
.
model
.
dynabeans
;
import
java
.
util
.
Locale
;
import
org
.
apache
.
commons
.
beanutils
.
DynaBean
;
import
org
.
apache
.
commons
.
jxpath
.
ri
.
QName
;
import
org
.
apache
.
commons
.
jxpath
.
ri
.
model
.
NodePointer
;
import
org
.
apache
.
commons
.
jxpath
.
ri
.
model
.
beans
.
PropertyOwnerPointer
;
import
org
.
apache
.
commons
.
jxpath
.
ri
.
model
.
beans
.
PropertyPointer
;
public
class
DynaBeanPointer
extends
PropertyOwnerPointer
{
private
static
final
long
serialVersionUID
=
-
9135052498044877965L
;
private
final
QName
name
;
private
final
DynaBean
dynaBean
;
public
DynaBeanPointer
(
final
QName
name
,
final
DynaBean
dynaBean
,
final
Locale
locale
)
{
super
(
null
,
locale
)
;
this
.
name
=
name
;
this
.
dynaBean
=
dynaBean
;
}
public
DynaBeanPointer
(
final
NodePointer
parent
,
final
QName
name
,
final
DynaBean
dynaBean
)
{
super
(
parent
)
;
this
.
name
=
name
;
this
.
dynaBean
=
dynaBean
;
}
@
Override
public
PropertyPointer
getPropertyPointer
(
)
{
return
new
DynaBeanPropertyPointer
(
this
,
dynaBean
)
;
}
@
Override
public
QName
getName
(
)
{
return
name
;
}
@
Override
public
Object
getBaseValue
(
)
{
return
dynaBean
;
}
@
Override
public
Object
getImmediateNode
(
)
{
return
dynaBean
;
}
@
Override
public
boolean
isCollection
(
)
{
return
false
;
}
@
Override
public
int
getLength
(
)
{
return
1
;
}
@
Override
public
boolean
isLeaf
(
)
{
return
false
;
}
@
Override
public
int
hashCode
(
)
{
return
name
==
null
?
0
:
name
.
hashCode
(
)
;
}
@
Override
public
boolean
equals
(
final
Object
object
)
{
if
(
object
==
this
)
{
return
true
;
}
if
(
!
(
object
instanceof
DynaBeanPointer
)
)
{
return
false
;
}
final
DynaBeanPointer
other
=
(
DynaBeanPointer
)
object
;
if
(
!
(
equalObjects
(
parent
,
other
.
parent
)
&&
equalObjects
(
name
,
other
.
name
)
)
)
{
return
false
;
}
final
int
iThis
=
index
==
WHOLE_COLLECTION
?
0
:
index
;
final
int
iOther
=
other
.
index
==
WHOLE_COLLECTION
?
0
:
other
.
index
;
return
iThis
==
iOther
&&
dynaBean
==
other
.
dynaBean
;
}
@
Override
public
String
asPath
(
)
{
return
parent
==
null
?
"/"
:
super
.
asPath
(
)
;
}
private
static
boolean
equalObjects
(
final
Object
o1
,
final
Object
o2
)
{
return
o1
==
o2
||
o1
!=
null
&&
o1
.
equals
(
o2
)
;
}
}
<EOF>
