diff --git a/src/main/java/org/davidmoten/hilbert/SmallHilbertCurve.java b/src/main/java/org/davidmoten/hilbert/SmallHilbertCurve.java
index f615b3d..95bf694 100644
--- a/src/main/java/org/davidmoten/hilbert/SmallHilbertCurve.java
+++ b/src/main/java/org/davidmoten/hilbert/SmallHilbertCurve.java
@@ -103,0 +104,12 @@ public final class SmallHilbertCurve {
+    public Ranges query(long[] a, long[] b, int maxRanges) {
+        Preconditions.checkArgument(maxRanges >= 0);
+        // TODO optimise this by joining ranges as they are found
+        // instead of joining them at the end
+        Ranges ranges = query(a, b);
+        if (maxRanges >= ranges.size() || maxRanges == 0) {
+            return ranges;
+        } else {
+            return ranges.join(ranges.size() - maxRanges);
+        }
+    }
+
@@ -105 +117,2 @@ public final class SmallHilbertCurve {
-     * Returns a list of index ranges exactly covering the region bounded by {@code a} and {@code b}.
+     * Returns a list of index ranges exactly covering the region bounded by
+     * {@code a} and {@code b}.
