package
com
.
zaxxer
.
nuprocess
.
osx
;
import
java
.
util
.
Arrays
;
import
java
.
util
.
List
;
import
com
.
sun
.
jna
.
Native
;
import
com
.
sun
.
jna
.
NativeLibrary
;
import
com
.
sun
.
jna
.
NativeLong
;
import
com
.
sun
.
jna
.
Pointer
;
import
com
.
sun
.
jna
.
Structure
;
public
class
LibKevent
{
static
{
Native
.
register
(
NativeLibrary
.
getProcess
(
)
)
;
}
public
static
native
int
kqueue
(
)
;
public
static
native
int
kevent
(
int
kq
,
Pointer
changeList
,
int
nchanges
,
Pointer
eventList
,
int
nevents
,
TimeSpec
timespec
)
;
public
static
class
TimeSpec
extends
Structure
{
public
long
tv_sec
;
public
long
tv_nsec
;
@
SuppressWarnings
(
"rawtypes"
)
@
Override
protected
List
getFieldOrder
(
)
{
return
Arrays
.
asList
(
"tv_sec"
,
"tv_nsec"
)
;
}
}
public
static
class
Kevent
extends
Structure
{
public
NativeLong
ident
;
public
short
filter
;
public
short
flags
;
public
int
fflags
;
public
NativeLong
data
;
public
Pointer
udata
;
public
Kevent
(
)
{
super
(
)
;
}
public
Kevent
(
Pointer
p
)
{
super
(
p
)
;
}
@
SuppressWarnings
(
"rawtypes"
)
@
Override
protected
List
getFieldOrder
(
)
{
return
Arrays
.
asList
(
"ident"
,
"filter"
,
"flags"
,
"fflags"
,
"data"
,
"udata"
)
;
}
Kevent
EV_SET
(
long
ident
,
int
filter
,
int
flags
,
int
fflags
,
long
data
,
Pointer
udata
)
{
this
.
ident
.
setValue
(
ident
)
;
this
.
filter
=
(
short
)
filter
;
this
.
flags
=
(
short
)
flags
;
this
.
fflags
=
fflags
;
this
.
data
.
setValue
(
data
)
;
this
.
udata
=
udata
;
return
this
;
}
public
static
final
int
EV_ADD
=
0x0001
;
public
static
final
int
EV_DELETE
=
0x0002
;
public
static
final
int
EV_ENABLE
=
0x0004
;
public
static
final
int
EV_DISABLE
=
0x0008
;
public
static
final
int
EV_RECEIPT
=
0x0040
;
public
static
final
int
EV_ONESHOT
=
0x0010
;
public
static
final
int
EV_CLEAR
=
0x0020
;
public
static
final
int
EV_DISPATCH
=
0x0080
;
public
static
final
int
EV_SYSFLAGS
=
0xF000
;
public
static
final
int
EV_FLAG0
=
0x1000
;
public
static
final
int
EV_FLAG1
=
0x2000
;
public
static
final
int
EV_EOF
=
0x8000
;
public
static
final
int
EV_ERROR
=
0x4000
;
public
static
final
int
EVFILT_READ
=
(
-
1
)
;
public
static
final
int
EVFILT_WRITE
=
(
-
2
)
;
public
static
final
int
EVFILT_AIO
=
(
-
3
)
;
public
static
final
int
EVFILT_VNODE
=
(
-
4
)
;
public
static
final
int
EVFILT_PROC
=
(
-
5
)
;
public
static
final
int
EVFILT_SIGNAL
=
(
-
6
)
;
public
static
final
int
EVFILT_TIMER
=
(
-
7
)
;
public
static
final
int
EVFILT_MACHPORT
=
(
-
8
)
;
public
static
final
int
EVFILT_FS
=
(
-
9
)
;
public
static
final
int
EVFILT_USER
=
(
-
10
)
;
public
static
final
int
EVFILT_VM
=
(
-
12
)
;
public
static
final
int
NOTE_EXIT
=
0x80000000
;
public
static
final
int
NOTE_REAP
=
0x10000000
;
public
static
final
int
NOTE_EXITSTATUS
=
0x04000000
;
}
}
<EOF>
