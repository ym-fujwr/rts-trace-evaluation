package
org
.
apache
.
commons
.
jxpath
.
ri
.
model
.
jdom
;
import
org
.
apache
.
commons
.
jxpath
.
ri
.
QName
;
import
org
.
apache
.
commons
.
jxpath
.
ri
.
model
.
NodePointer
;
import
org
.
apache
.
commons
.
jxpath
.
util
.
TypeUtils
;
import
org
.
jdom
.
Attribute
;
public
class
JDOMAttributePointer
extends
NodePointer
{
private
final
Attribute
attr
;
private
static
final
long
serialVersionUID
=
8896050354479644028L
;
public
JDOMAttributePointer
(
final
NodePointer
parent
,
final
Attribute
attr
)
{
super
(
parent
)
;
this
.
attr
=
attr
;
}
@
Override
public
QName
getName
(
)
{
return
new
QName
(
JDOMNodePointer
.
getPrefix
(
attr
)
,
JDOMNodePointer
.
getLocalName
(
attr
)
)
;
}
@
Override
public
String
getNamespaceURI
(
)
{
String
uri
=
attr
.
getNamespaceURI
(
)
;
if
(
uri
!=
null
&&
uri
.
equals
(
""
)
)
{
uri
=
null
;
}
return
uri
;
}
@
Override
public
Object
getValue
(
)
{
return
attr
.
getValue
(
)
;
}
@
Override
public
Object
getBaseValue
(
)
{
return
attr
;
}
@
Override
public
boolean
isCollection
(
)
{
return
false
;
}
@
Override
public
int
getLength
(
)
{
return
1
;
}
@
Override
public
Object
getImmediateNode
(
)
{
return
attr
;
}
@
Override
public
boolean
isActual
(
)
{
return
true
;
}
@
Override
public
boolean
isLeaf
(
)
{
return
true
;
}
@
Override
public
void
setValue
(
final
Object
value
)
{
attr
.
setValue
(
(
String
)
TypeUtils
.
convert
(
value
,
String
.
class
)
)
;
}
@
Override
public
void
remove
(
)
{
attr
.
getParent
(
)
.
removeAttribute
(
attr
)
;
}
@
Override
public
String
asPath
(
)
{
final
StringBuffer
buffer
=
new
StringBuffer
(
)
;
if
(
parent
!=
null
)
{
buffer
.
append
(
parent
.
asPath
(
)
)
;
if
(
buffer
.
length
(
)
==
0
||
buffer
.
charAt
(
buffer
.
length
(
)
-
1
)
!=
'/'
)
{
buffer
.
append
(
'/'
)
;
}
}
buffer
.
append
(
'@'
)
;
buffer
.
append
(
getName
(
)
)
;
return
buffer
.
toString
(
)
;
}
@
Override
public
int
hashCode
(
)
{
return
System
.
identityHashCode
(
attr
)
;
}
@
Override
public
boolean
equals
(
final
Object
object
)
{
return
object
==
this
||
object
instanceof
JDOMAttributePointer
&&
(
(
JDOMAttributePointer
)
object
)
.
attr
==
attr
;
}
@
Override
public
int
compareChildNodePointers
(
final
NodePointer
pointer1
,
final
NodePointer
pointer2
)
{
return
0
;
}
}
<EOF>
