package
org
.
apache
.
commons
.
net
.
chargen
;
import
java
.
io
.
IOException
;
import
java
.
net
.
DatagramPacket
;
import
java
.
net
.
InetAddress
;
import
org
.
apache
.
commons
.
net
.
DatagramSocketClient
;
import
org
.
apache
.
commons
.
net
.
util
.
NetConstants
;
public
final
class
CharGenUDPClient
extends
DatagramSocketClient
{
public
static
final
int
SYSTAT_PORT
=
11
;
public
static
final
int
NETSTAT_PORT
=
15
;
public
static
final
int
QUOTE_OF_DAY_PORT
=
17
;
public
static
final
int
CHARGEN_PORT
=
19
;
public
static
final
int
DEFAULT_PORT
=
19
;
private
final
byte
[
]
receiveData
;
private
final
DatagramPacket
receivePacket
;
private
final
DatagramPacket
sendPacket
;
public
CharGenUDPClient
(
)
{
receiveData
=
new
byte
[
512
]
;
receivePacket
=
new
DatagramPacket
(
receiveData
,
receiveData
.
length
)
;
sendPacket
=
new
DatagramPacket
(
NetConstants
.
EMPTY_BTYE_ARRAY
,
0
)
;
}
public
byte
[
]
receive
(
)
throws
IOException
{
final
int
length
;
final
byte
[
]
result
;
_socket_
.
receive
(
receivePacket
)
;
result
=
new
byte
[
length
=
receivePacket
.
getLength
(
)
]
;
System
.
arraycopy
(
receiveData
,
0
,
result
,
0
,
length
)
;
return
result
;
}
public
void
send
(
final
InetAddress
host
)
throws
IOException
{
send
(
host
,
DEFAULT_PORT
)
;
}
public
void
send
(
final
InetAddress
host
,
final
int
port
)
throws
IOException
{
sendPacket
.
setAddress
(
host
)
;
sendPacket
.
setPort
(
port
)
;
_socket_
.
send
(
sendPacket
)
;
}
}
<EOF>
